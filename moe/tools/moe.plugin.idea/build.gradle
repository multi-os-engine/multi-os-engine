buildscript {
    repositories {
        maven {
            url 'http://dl.bintray.com/jetbrains/intellij-plugin-service'
        }
    }
}

plugins {
    id "org.jetbrains.intellij" version "0.1.10"
}

apply plugin: 'idea'
apply plugin: 'maven-publish'

group 'org.multi-os-engine'
version '1.2.1'

sourceCompatibility = 1.6
targetCompatibility = 1.6

def PLUGIN_NAME = 'moe_intellij_plugin'

intellij {
    version 'IC-15.0'
    plugins = ['gradle']
    pluginName PLUGIN_NAME
    downloadSources false
    updateSinceUntilBuild false

    publish {
        if (project.hasProperty('intellij.user')) {
            username = property('intellij.user')
        }
        if (project.hasProperty('intellij.password')) {
            password = property('intellij.password')
        }
    }
}

dependencies {
    compile project(':moe.tools.common')
    compile project(':moe.document.pbxproj')
    compile project(':moe.document.xib')
    compile project(':moe.generator.project')
    compile project(':moe.tools.natjgen')
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            groupId 'org.multi-os-engine'
            artifactId PLUGIN_NAME

            artifact file("build/distributions/${PLUGIN_NAME}.zip")
        }
    }
}
